<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ratio Legis - Plataforma Jurídica Académica</title>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Markmap Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-lib"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-view@0.15.4"></script>

    <style>
        /* --- Paleta de Colores "Tech-Legal" --- */
        :root {
            --bg-color: #0a0a0c;
            --bg-secondary: #131316;
            --text-color: #ededed;
            --text-secondary: #888888;
            --accent-pink: #f00084;
            --accent-light-pink: #ff47a8;
            --border-color: rgba(255, 255, 255, 0.1);
            --glow-effect: 0 0 8px var(--accent-pink), 0 0 16px rgba(240, 0, 132, 0.5);
        }

        /* --- Estilos Generales --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at 50% 20%, rgba(240, 0, 132, 0.08) 0%, rgba(240, 0, 132, 0) 40%);
            background-attachment: fixed;
            color: var(--text-color);
            line-height: 1.7;
            font-weight: 400;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        h1, h2, h3, h4 {
            font-weight: 700;
            color: #ffffff;
            letter-spacing: -0.5px;
        }

        /* --- Barra de Navegación --- */
        .main-nav {
            background-color: rgba(10, 10, 12, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            padding: 0 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }
        .nav-logo {
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--text-color);
            text-decoration: none;
        }
        .nav-logo span {
            color: var(--accent-pink);
        }
        .nav-menu {
            display: flex;
            gap: 1.5rem;
        }
        .nav-link {
            background: none; border: none; color: var(--text-secondary);
            font-family: 'Inter', sans-serif; font-size: 1rem; font-weight: 500;
            cursor: pointer; transition: color 0.3s ease;
            text-decoration: none; padding: 0.5rem;
        }
        .nav-link:hover, .nav-link.active {
            color: var(--accent-pink);
        }

        /* --- Vistas Principales --- */
        .view {
            display: none;
            animation: fadeIn 0.6s ease-out;
        }
        .view.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Header de cada sección --- */
        .view-header {
            text-align: center;
            padding: 3rem 0;
            margin-bottom: 3rem;
        }
        .view-header h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }
        .view-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* --- Estilos para la página de INICIO --- */
        #inicio-view .hero-content {
            text-align: center;
            padding: 4rem 0;
        }
        #inicio-view .hero-content h1 {
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--accent-light-pink), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
         #inicio-view .hero-content .tagline {
            font-size: 1.5rem;
            margin-top: 0.5rem;
            color: var(--text-secondary);
            font-weight: 400;
        }
        #inicio-view .hero-content .intro-text {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 2rem auto 3rem;
            color: var(--text-color);
        }
        .cta-button {
            background: var(--accent-pink);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        .cta-button:hover {
            background-color: var(--accent-light-pink);
            box-shadow: var(--glow-effect);
        }
        .features-section {
            padding: 4rem 0;
            border-top: 1px solid var(--border-color);
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            text-align: center;
        }
        .feature-item .icon {
            color: var(--accent-pink);
            margin-bottom: 1rem;
        }
        .feature-item .icon svg {
            width: 48px;
            height: 48px;
        }
        .feature-item h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .feature-item p {
            color: var(--text-secondary);
        }

        /* --- Estilos para ESTUDIO (Tarjetas de Materias) --- */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }
        .materia-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .materia-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.5), var(--glow-effect);
            border-color: rgba(240, 0, 132, 0.5);
        }
        .materia-card .card-icon { color: var(--accent-pink); margin-bottom: 1rem; }
        .materia-card .card-icon svg { width: 32px; height: 32px; }
        .materia-card h3 { font-size: 1.6rem; font-weight: 600; margin-bottom: 0.75rem; }
        .materia-card p { color: var(--text-secondary); font-size: 1rem; }

        /* --- Estilos para DOCTRINA y LEGISLACIÓN --- */
        .article-list, .law-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        .article-card, .law-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            transition: border-color 0.3s ease;
        }
        .article-card:hover, .law-item:hover {
            border-color: var(--accent-pink);
        }
        .article-card h3, .law-item h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--accent-light-pink);
        }
        .article-card .meta, .law-item .meta {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        .article-card p {
            color: var(--text-color);
        }

        /* --- Estilos para CONTACTO --- */
        .contact-form {
            max-width: 700px;
            margin: 0 auto;
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-color);
            font-size: 1rem;
        }
        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-pink);
            box-shadow: var(--glow-effect);
        }
        .submit-btn {
            width: 100%;
            background: var(--accent-pink);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 1rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .submit-btn:hover {
            background-color: var(--accent-light-pink);
            box-shadow: var(--glow-effect);
        }

        /* --- Estilos para la vista de contenido de materia --- */
        #materia-content-view { display: none; }
        .content-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 2rem; border-bottom: 1px solid var(--border-color); padding-bottom: 1.5rem;
        }
        .content-header h2 { font-size: 2.5rem; font-weight: 700; }
        .back-button {
            background: transparent; color: var(--text-color); border: 1px solid var(--border-color);
            border-radius: 8px; padding: 0.6rem 1.2rem; cursor: pointer; font-weight: 500;
            transition: all 0.3s ease;
        }
        .back-button:hover { background-color: var(--accent-pink); color: white; border-color: var(--accent-pink); box-shadow: var(--glow-effect); }
        .content-wrapper { background-color: transparent; border: none; padding: 0; }
        .tab-nav { display: flex; border-bottom: 1px solid var(--border-color); margin-bottom: 2rem; }
        .tab-button { background: none; border: none; color: var(--text-secondary); padding: 1rem 1.5rem; cursor: pointer; font-size: 1rem; font-weight: 500; transition: all 0.3s ease; border-bottom: 2px solid transparent; margin-bottom: -1px; }
        .tab-button:hover { color: var(--text-color); }
        .tab-button.active { color: var(--accent-pink); border-bottom-color: var(--accent-pink); }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease; }
        .main-content-panel { background: var(--bg-secondary); padding: 2rem; border-radius: 8px; }
        .main-content-panel h3 { color: var(--accent-light-pink); margin-bottom: 1rem; font-size: 1.5rem; }
        .feynman-btn { background: var(--accent-pink); color: white; border: none; border-radius: 8px; padding: 0.8rem 1.5rem; cursor: pointer; font-weight: 700; transition: all 0.3s ease; margin-top: 1rem; }
        .feynman-btn:hover { background-color: var(--accent-light-pink); box-shadow: var(--glow-effect); }
        .feynman-explanation { display: none; margin-top: 1.5rem; padding: 1.5rem; border: 1px dashed var(--border-color); border-radius: 8px; background-color: rgba(0,0,0,0.2); }
        .infografia-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
        .info-card { background-color: var(--bg-secondary); padding: 1.5rem; border-radius: 8px; border: 1px solid var(--border-color); }
        .info-card img { width: 100%; height: 180px; object-fit: cover; border-radius: 4px; margin-bottom: 1rem; }
        .info-card h4 { color: var(--accent-light-pink); margin-bottom: 0.5rem; font-size: 1.3rem; }
        .markmap-container { width: 100%; height: 600px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-secondary); }
        .quiz-question { margin-bottom: 2rem; padding: 1.5rem; border-radius: 8px; background-color: var(--bg-secondary); border-left: 3px solid var(--accent-pink); }
        .quiz-options label { display: block; padding: 0.8rem; margin-bottom: 0.5rem; border: 1px solid var(--border-color); border-radius: 6px; cursor: pointer; transition: all 0.2s ease; }
        .quiz-options label:hover { background-color: rgba(255, 255, 255, 0.05); border-color: var(--accent-light-pink); }
        .quiz-options input { margin-right: 0.8rem; accent-color: var(--accent-pink); }
        .quiz-options .correct { background-color: rgba(0, 255, 196, 0.1); border-color: #00ffc4; }
        .quiz-options .incorrect { background-color: rgba(244, 0, 136, 0.15); border-color: var(--accent-pink); }
        .verify-btn { background: transparent; color: var(--accent-pink); border: 1px solid var(--accent-pink); border-radius: 8px; padding: 0.8rem 1.5rem; cursor: pointer; font-weight: 700; transition: all 0.3s ease; margin-top: 1rem; }
        .verify-btn:hover { background-color: var(--accent-pink); color: white; box-shadow: var(--glow-effect); }

        /* --- Footer --- */
        .main-footer { text-align: center; padding: 3rem 2rem 2rem; margin-top: 4rem; border-top: 1px solid var(--border-color); color: var(--text-secondary); font-size: 0.9rem; }
    </style>
</head>
<body>

    <nav class="main-nav">
        <div class="nav-container">
            <a href="#" class="nav-logo" data-view="inicio-view">Ratio<span>Legis</span></a>
            <div class="nav-menu">
                <button class="nav-link active" data-view="inicio-view">Inicio</button>
                <button class="nav-link" data-view="estudio-view">Estudio</button>
                <button class="nav-link" data-view="doctrina-view">Doctrina</button>
                <button class="nav-link" data-view="legislacion-view">Legislación</button>
                <button class="nav-link" data-view="contacto-view">Contacto</button>
            </div>
        </div>
    </nav>

    <main>
        <!-- VISTA DE INICIO -->
        <div id="inicio-view" class="view active">
            <div class="container">
                <div class="hero-content">
                    <h1>Ratio Legis</h1>
                    <h2 class="tagline">La razón de la ley, al alcance de tu mano.</h2>
                    <p class="intro-text">Bienvenido a una plataforma académica moderna, diseñada para potenciar el estudio y la comprensión del derecho. Aquí encontrarás material de estudio, herramientas interactivas y recursos legislativos esenciales, presentados con la claridad y la profundidad que tu carrera exige.</p>
                    <button class="cta-button" data-view="estudio-view">Comenzar a Estudiar</button>
                </div>
                <div class="features-section">
                    <div class="features-grid">
                        <div class="feature-item">
                            <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256"><path d="M224,48H32a8,8,0,0,0-8,8V192a8,8,0,0,0,8,8H224a8,8,0,0,0,8-8V56A8,8,0,0,0,224,48ZM40,184V64H93.33l26.67,20,26.67-20H216V184Z"></path></svg></div>
                            <h3>Estudio Interactivo</h3>
                            <p>Navega por materias complejas con la ayuda de infografías, redes conceptuales y cuestionarios.</p>
                        </div>
                        <div class="feature-item">
                            <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256"><path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208ZM128,80a48,48,0,1,1-48,48A48.05,48.05,0,0,1,128,80Zm0,80a32,32,0,1,0-32-32A32,32,0,0,0,128,160Z"></path></svg></div>
                            <h3>Doctrina y Análisis</h3>
                            <p>Accede a artículos y reflexiones sobre temas jurídicos de actualidad para profundizar tu conocimiento.</p>
                        </div>
                        <div class="feature-item">
                            <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256"><path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,160H40V56H216V200ZM128,88a40,40,0,0,0-40,40,8,8,0,0,0,16,0,24,24,0,1,1,24,24,8,8,0,0,0,0,16,40,40,0,0,0,0-80Z"></path></svg></div>
                            <h3>Legislación Actualizada</h3>
                            <p>Consulta una selección de códigos y leyes fundamentales, siempre disponibles y fáciles de navegar.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VISTA DE ESTUDIO (Tarjetas) -->
        <div id="estudio-view" class="view">
            <div class="container">
                <div class="view-header">
                    <h1>Área de Estudio</h1>
                    <p>Selecciona una materia para acceder al material de estudio, resúmenes visuales, redes conceptuales y cuestionarios de autoevaluación.</p>
                </div>
                <div id="card-container" class="card-grid">
                    <!-- Las tarjetas de las materias se generarán aquí -->
                </div>
            </div>
        </div>

        <!-- VISTA DE DOCTRINA -->
        <div id="doctrina-view" class="view">
            <div class="container">
                <div class="view-header">
                    <h1>Artículos de Doctrina</h1>
                    <p>Análisis y reflexiones sobre temas jurídicos de actualidad y relevancia académica, elaborados por especialistas.</p>
                </div>
                <div id="doctrina-container" class="article-list">
                    <!-- Artículos de doctrina se generarán aquí -->
                </div>
            </div>
        </div>

        <!-- VISTA DE LEGISLACIÓN -->
        <div id="legislacion-view" class="view">
            <div class="container">
                <div class="view-header">
                    <h1>Legislación Relevante</h1>
                    <p>Acceso directo a una selección de códigos y leyes fundamentales para el estudio de las distintas ramas del derecho.</p>
                </div>
                <div id="legislacion-container" class="law-list">
                    <!-- Items de legislación se generarán aquí -->
                </div>
            </div>
        </div>
        
        <!-- VISTA DE CONTACTO -->
        <div id="contacto-view" class="view">
            <div class="container">
                <div class="view-header">
                    <h1>Contacto</h1>
                    <p>Si tienes sugerencias, correcciones o deseas colaborar con el proyecto, no dudes en enviar un mensaje.</p>
                </div>
                <form class="contact-form" onsubmit="alert('Formulario enviado (simulación). ¡Gracias!'); return false;">
                    <div class="form-group">
                        <label for="name">Nombre</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Correo Electrónico</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="message">Mensaje</label>
                        <textarea id="message" name="message" rows="6" required></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Enviar Mensaje</button>
                </form>
            </div>
        </div>

        <!-- VISTA DE CONTENIDO DE MATERIA (oculta) -->
        <div id="materia-content-view" class="view">
            <div class="container">
                <div class="content-header">
                    <h2 id="materia-title"></h2>
                    <button id="back-to-estudio-button" class="back-button">&larr; Volver a Estudio</button>
                </div>
                <div class="content-wrapper">
                    <nav class="tab-nav">
                        <button class="tab-button" data-tab="texto">Contenido</button>
                        <button class="tab-button" data-tab="infografia">Infografía</button>
                        <button class="tab-button" data-tab="redes">Redes Conceptuales</button>
                        <button class="tab-button" data-tab="cuestionarios">Cuestionarios</button>
                    </nav>
                    <div id="content-container">
                        <!-- El contenido de la materia se cargará aquí -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <p>&copy; 2025 Ratio Legis. Todos los derechos reservados. Creado con fines académicos.</p>
    </footer>

    <script>
    // --- BASE DE DATOS DE CONTENIDO ---
    const materiasData = {
        'fundamentos-derecho-privado': {
            nombre: 'Fundamentos del Derecho Privado',
            descripcion: 'Conceptos esenciales del Derecho Civil, la codificación, la persona y sus atributos.',
            contenido: {
                texto: `<div class="main-content-panel"><h3>Unidad 1: El Derecho Civil y su Codificación</h3><p>El Derecho Civil es el conjunto de normas jurídicas y principios que regulan las relaciones personales o patrimoniales, voluntarias o forzosas, entre personas privadas o públicas, tanto físicas como jurídicas, de carácter privado y público.</p><ul><li>Codificación: Proceso de sistematización y ordenación de las normas en un cuerpo único y coherente (Código).</li><li>El Código Civil y Comercial de la Nación (CCCN) unifica la legislación civil y comercial, entrando en vigencia en 2015.</li><li>Fuentes del derecho: la ley, la costumbre, la jurisprudencia y la doctrina.</li></ul><h3>Unidad 2: La Persona Humana</h3><p>Comienzo de la existencia de la persona humana: desde la concepción. Derechos y atributos de la personalidad: nombre, domicilio, capacidad, estado civil y patrimonio.</p><button class="feynman-btn">Explicar con Método Feynman</button><div class="feynman-explanation"></div></div>`,
                infografia: [{img: 'https://placehold.co/600x400/121212/f40088?text=Codificaci%C3%B3n', titulo: 'Proceso de Codificación', texto: 'La unificación de las leyes civiles y comerciales en un solo cuerpo normativo para dar coherencia y seguridad jurídica.'}, {img: 'https://placehold.co/600x400/121212/ff5bb0?text=Persona+Humana', titulo: 'Atributos de la Personalidad', texto: 'Cualidades inherentes a la persona: Nombre, Domicilio, Capacidad, etc.'}],
                redes: `# Fundamentos del Derecho Privado\n## Derecho Civil\n- Concepto\n- Codificación\n  - Código de Vélez\n  - CCCN 2015\n- Fuentes\n## Persona Humana\n- Comienzo de la existencia\n- Atributos\n  - Nombre\n  - Domicilio\n  - Capacidad`,
                cuestionarios: [{pregunta: '¿Cuándo comienza la existencia de la persona humana según el CCCN?', opciones: ['Con el nacimiento con vida.', 'A los 18 años.', 'Desde la concepción.', 'Al ser inscripto en el Registro Civil.'], respuestaCorrecta: 2}, {pregunta: '¿Cuál de los siguientes NO es un atributo de la personalidad?', opciones: ['El nombre.', 'La profesión.', 'El domicilio.', 'La capacidad.'], respuestaCorrecta: 1}]
            }
        },
        'derecho-laboral': {
            nombre: 'Derecho Laboral',
            descripcion: 'Estudio de los principios, el contrato de trabajo y las relaciones laborales.',
            contenido: {
                texto: `<div class="main-content-panel"><h3>Unidad 1: Principios del Derecho del Trabajo</h3><p>El Derecho Laboral se rige por principios protectores hacia el trabajador, considerado la parte más débil de la relación.</p><ul><li><strong>Principio Protectorio:</strong> Se manifiesta en tres reglas: in dubio pro operario, la norma más favorable y la condición más beneficiosa.</li><li><strong>Principio de Irrenunciabilidad de Derechos:</strong> El trabajador no puede renunciar a los derechos establecidos en la ley.</li><li><strong>Principio de Continuidad de la Relación Laboral:</strong> Se busca que el contrato de trabajo tenga la mayor duración posible.</li></ul><button class="feynman-btn">Explicar con Método Feynman</button><div class="feynman-explanation"></div></div>`,
                infografia: [{img: 'https://placehold.co/600x400/121212/f40088?text=Protecci%C3%B3n', titulo: 'Principio Protectorio', texto: 'La regla fundamental que busca equilibrar la desigualdad entre empleador y trabajador.'}, {img: 'https://placehold.co/600x400/121212/ff5bb0?text=Contrato', titulo: 'Continuidad Laboral', texto: 'El contrato de trabajo se presume por tiempo indeterminado, salvo prueba en contrario.'}],
                redes: `# Derecho Laboral\n## Principios\n- Protectorio\n- Irrenunciabilidad\n- Continuidad\n## Contrato de Trabajo\n- Elementos\n- Modalidades`,
                cuestionarios: [{pregunta: 'La regla "in dubio pro operario" significa que:', opciones: ['En caso de duda, se favorece al empleador.', 'En caso de duda sobre la aplicación de normas, se favorece al trabajador.', 'El trabajador siempre tiene la razón.', 'El empleador puede dudar de la capacidad del trabajador.'], respuestaCorrecta: 1}]
            }
        },
        'derecho-penal-especial': {
            nombre: 'Derecho Penal (P. Especial)',
            descripcion: 'Análisis de los delitos en particular, tipificados en el Código Penal y leyes especiales.',
            contenido: {
                texto: '<div class="main-content-panel"><h3>Contenido en construcción</h3><p>Esta sección se encuentra actualmente en desarrollo. Vuelve pronto para ver el contenido completo sobre Derecho Penal (Parte Especial).</p></div>',
                infografia: [],
                redes: '# Derecho Penal (Parte Especial)\n- Delitos contra las personas\n- Delitos contra la propiedad',
                cuestionarios: []
            }
        }
    };
    const doctrinaData = [
        { titulo: 'La Inteligencia Artificial y su Impacto en la Responsabilidad Civil', autor: 'Dr. Juan C. Pérez', fecha: '15 de Junio, 2025', resumen: 'Un análisis sobre los nuevos paradigmas de la responsabilidad por daños causados por sistemas autónomos y algoritmos de IA.' },
        { titulo: 'El Futuro del Contrato de Trabajo en la Era Digital', autor: 'Dra. María L. Gómez', fecha: '02 de Julio, 2025', resumen: 'Reflexiones sobre la adaptación de los principios del derecho laboral a las nuevas modalidades de trabajo remoto y plataformas digitales.' }
    ];
    const legislacionData = [
        { titulo: 'Código Civil y Comercial de la Nación', descripcion: 'Texto completo y actualizado, ley 26.994.' },
        { titulo: 'Ley de Contrato de Trabajo (Nº 20.744)', descripcion: 'Régimen de contrato de trabajo y sus modalidades.' },
        { titulo: 'Código Penal de la Nación Argentina', descripcion: 'Texto ordenado y actualizado de la ley 11.179.' }
    ];


    // --- LÓGICA DE LA PÁGINA ---
    document.addEventListener('DOMContentLoaded', () => {
        const views = document.querySelectorAll('.view');
        const navLinks = document.querySelectorAll('.nav-link, .nav-logo, .cta-button');
        const cardContainer = document.getElementById('card-container');
        const materiaContentView = document.getElementById('materia-content-view');
        const backToEstudioButton = document.getElementById('back-to-estudio-button');
        const { Markmap, Transformer } = window.markmap;
        const transformer = new Transformer();

        // --- NAVEGACIÓN PRINCIPAL ---
        function showView(viewId) {
            views.forEach(view => view.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            
            navLinks.forEach(link => {
                // Special handling for logo, as it doesn't have a 'nav-link' class
                if (link.classList.contains('nav-logo')) {
                     link.classList.toggle('active', viewId === 'inicio-view');
                } else {
                     link.classList.toggle('active', link.dataset.view === viewId);
                }
            });
             window.scrollTo(0, 0);
        }

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const viewId = e.currentTarget.dataset.view;
                if (materiaContentView.classList.contains('active') && viewId === 'estudio-view') {
                    showEstudioView();
                } else {
                    showView(viewId);
                }
            });
        });

        // --- LÓGICA DE LA SECCIÓN ESTUDIO ---
        function showEstudioView() {
            materiaContentView.classList.remove('active');
            showView('estudio-view');
        }
        
        function showMateriaContentView(materiaKey) {
            views.forEach(view => view.classList.remove('active'));
            materiaContentView.classList.add('active');
            document.getElementById('materia-title').textContent = materiasData[materiaKey].nombre;
            cargarContenidoMateria(materiaKey);
        }

        backToEstudioButton.addEventListener('click', showEstudioView);

        function generarTarjetasMaterias() {
            cardContainer.innerHTML = '';
            for (const key in materiasData) {
                const materia = materiasData[key];
                const card = document.createElement('div');
                card.className = 'materia-card';
                card.innerHTML = `<div class="card-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256"><path d="M242.33,85.67A16,16,0,0,0,232,80H216V48a16,16,0,0,0-16-16H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V176h16a16,16,0,0,0,16-16V96A16,16,0,0,0,242.33,85.67ZM48,48H200V80H53.67a16,16,0,0,0-15.34,20.33L48,136.89Zm152,160H48V152.89l-9.67-32.33A16,16,0,0,0,24,104a15.94,15.94,0,0,0-3.67.51L16,106.33V96a16,16,0,0,0,16,16H200v48h16v10.33l-4.33-1.8A16,16,0,0,0,216,176v-2.33l-16-6.86V152.89l-9.67-32.33a16,16,0,0,0-15.34-12.33H160a16,16,0,0,0,0,32h26.33l9.67,32.33A16,16,0,0,0,211.33,184H216v24Zm32-48H216V96h16a1,1,0,0,1,0,2,1,1,0,0,1,0-2h0v64Z"></path></svg></div><h3>${materia.nombre}</h3><p>${materia.descripcion}</p>`;
                card.addEventListener('click', () => showMateriaContentView(key));
                cardContainer.appendChild(card);
            }
        }

        function cargarContenidoMateria(materiaKey) {
            const materia = materiasData[materiaKey];
            const contentContainer = document.getElementById('content-container');
            contentContainer.innerHTML = '';
            
            const textoTab = createTabContent('texto', materia.contenido.texto);
            const infografiaTab = createTabContent('infografia', createInfografiaHTML(materia.contenido.infografia));
            const redesTab = createTabContent('redes', `<svg class="markmap-container"></svg>`);
            const cuestionariosTab = createTabContent('cuestionarios', createCuestionariosHTML(materia.contenido.cuestionarios, materiaKey));
            
            contentContainer.append(textoTab, infografiaTab, redesTab, cuestionariosTab);
            
            const tabNav = materiaContentView.querySelector('.tab-nav');
            tabNav.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            tabNav.querySelector('.tab-button[data-tab="texto"]').classList.add('active');
            textoTab.classList.add('active');

            const { root } = transformer.transform(materia.contenido.redes);
            Markmap.create(redesTab.querySelector('.markmap-container'), undefined, root);
            
            addEventListenersToMateriaContent(materiaKey);
        }
        
        // --- LÓGICA OTRAS SECCIONES ---
        function generarContenidoDoctrina() {
            const container = document.getElementById('doctrina-container');
            container.innerHTML = doctrinaData.map(article => `
                <div class="article-card">
                    <h3>${article.titulo}</h3>
                    <div class="meta">Por ${article.autor} | ${article.fecha}</div>
                    <p>${article.resumen}</p>
                </div>
            `).join('');
        }

        function generarContenidoLegislacion() {
            const container = document.getElementById('legislacion-container');
            container.innerHTML = legislacionData.map(law => `
                <div class="law-item">
                    <h3>${law.titulo}</h3>
                    <p class="meta">${law.descripcion}</p>
                </div>
            `).join('');
        }

        // --- HELPERS Y EVENT LISTENERS ---
        function createTabContent(tabName, innerHTML) {
            const div = document.createElement('div');
            div.className = 'tab-content';
            div.dataset.tab = tabName;
            div.innerHTML = innerHTML;
            return div;
        }

        function createInfografiaHTML(items) {
            if (!items || items.length === 0) return '<p>No hay infografías disponibles.</p>';
            return `<div class="infografia-grid">${items.map(item => `<div class="info-card"><img src="${item.img}" alt="${item.titulo}"><h4>${item.titulo}</h4><p>${item.texto}</p></div>`).join('')}</div>`;
        }

        function createCuestionariosHTML(items, materiaKey) {
            if (!items || items.length === 0) return '<p>No hay cuestionarios disponibles.</p>';
            let html = items.map((item, index) => `
                <div class="quiz-question" data-question-index="${index}">
                    <p>${index + 1}. ${item.pregunta}</p>
                    <div class="quiz-options">
                        ${item.opciones.map((opcion, i) => `<label><input type="radio" name="quiz-${materiaKey}-${index}" value="${i}">${opcion}</label>`).join('')}
                    </div>
                </div>`).join('');
            return html + '<button class="verify-btn">Verificar Respuestas</button>';
        }

        materiaContentView.querySelector('.tab-nav').addEventListener('click', (e) => {
            if (e.target.matches('.tab-button')) {
                const tabName = e.target.dataset.tab;
                materiaContentView.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                materiaContentView.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                e.target.classList.add('active');
                materiaContentView.querySelector(`.tab-content[data-tab="${tabName}"]`).classList.add('active');
            }
        });

        function addEventListenersToMateriaContent(materiaKey) {
            const contentContainer = document.getElementById('content-container');
            const feynmanBtn = contentContainer.querySelector('.feynman-btn');
            if(feynmanBtn) {
                feynmanBtn.addEventListener('click', () => {
                    const explanationDiv = contentContainer.querySelector('.feynman-explanation');
                    explanationDiv.style.display = explanationDiv.style.display === 'block' ? 'none' : 'block';
                    if(!explanationDiv.innerHTML) {
                        explanationDiv.innerHTML = `<h4>¿Cómo usar el Método Feynman?</h4><p><strong>Paso 1: Elige un concepto.</strong> Ya tienes el texto base aquí. Léelo atentamente.</p><p><strong>Paso 2: Enséñalo a un niño (o explícalo con tus palabras).</strong> Intenta reescribir el concepto en un lenguaje muy simple, usando analogías y ejemplos. Copia y pega tu explicación aquí abajo.</p><textarea style="width: 100%; height: 100px; margin-top: 10px; background: #1e1e1e; color: white; border: 1px solid var(--border-color); border-radius: 4px; padding: 10px;"></textarea><p><strong>Paso 3: Identifica tus lagunas de conocimiento.</strong> Al explicar, notarás dónde te trabas o qué partes no entiendes bien. Vuelve al material original para reforzar esas áreas.</p><p><strong>Paso 4: Organiza, simplifica y cuenta una historia.</strong> Refina tu explicación hasta que sea clara, concisa y fácil de seguir. ¡Repite el proceso hasta dominar el tema!</p>`;
                    }
                });
            }

            const verifyBtn = contentContainer.querySelector('.verify-btn');
            if(verifyBtn) {
                verifyBtn.addEventListener('click', () => {
                    const questions = materiasData[materiaKey].contenido.cuestionarios;
                    contentContainer.querySelectorAll('.quiz-question').forEach((questionDiv) => {
                        const questionIndex = parseInt(questionDiv.dataset.questionIndex);
                        const correctAnswerIndex = questions[questionIndex].respuestaCorrecta;
                        const selectedOption = questionDiv.querySelector('input[type="radio"]:checked');
                        questionDiv.querySelectorAll('.quiz-options label').forEach(label => label.classList.remove('correct', 'incorrect'));
                        if (selectedOption) {
                            const selectedLabel = selectedOption.parentElement;
                            if (parseInt(selectedOption.value) === correctAnswerIndex) {
                                selectedLabel.classList.add('correct');
                            } else {
                                selectedLabel.classList.add('incorrect');
                                questionDiv.querySelector(`input[value="${correctAnswerIndex}"]`).parentElement.classList.add('correct');
                            }
                        } else {
                            questionDiv.querySelector(`input[value="${correctAnswerIndex}"]`).parentElement.classList.add('correct');
                        }
                    });
                });
            }
        }

        // --- INICIALIZACIÓN ---
        showView('inicio-view');
        generarTarjetasMaterias();
        generarContenidoDoctrina();
        generarContenidoLegislacion();
    });
    </script>
</body>
</html>
